# 개발 환경용 - 빠른 배포 
# 사용법: helm install app . -f values_dev.yaml
global:
  image:
    tag: "v3.0-db"  # Python 앱 버전

serviceAccount:
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::863422182520:role/ezl-app-server-dev-role"

# 일반 Deployment 사용 (빠름)
rollout:
  enabled: false
revisionHistoryLimit: 3

ingress:
  enabled: true
  className: nginx
  hosts:
    # 프로덕션 용 ingress (Active 서비스)
    - host: app.seungdobae.com
      path: /
      pathType: Prefix

# 개발용 설정
replicaCount: 1

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 200m
    memory: 256Mi

# 오토스케일링 비활성화
autoscaling:
  enabled: false

# 엄격한 헬스체크
startupProbe:
  httpGet:
    path: /api/intgapp/ping/
    port: 8000
  failureThreshold: 5
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5

livenessProbe:
  httpGet:
    path: /api/intgapp/ping/
    port: 8000
  failureThreshold: 3
  periodSeconds: 30
  timeoutSeconds: 5

readinessProbe:
  httpGet:
    path: /api/intgapp/ping/
    port: 8000
  failureThreshold: 3
  periodSeconds: 10
  timeoutSeconds: 5
